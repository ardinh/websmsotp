var baseurl="http://localhost/crwaling_bioskop/cpanel/";baseurl="http://localhost/robo/v4/cpanel/";/*baseurl="http://dev.motion.co.id/robo/v4/cpanel/";*/var ajaxtable;var getnewlinkurl=baseurl+"crawler/getnewlink.php";var cariurl=baseurl+"php/searchTitle.php";var pilihurl=baseurl+"php/pilihmovie.php";var fetchmovieurl=baseurl+"php/fetchmovie.php";var saveseasonurl=baseurl+"php/saveseason.php";var fetchepisodeurl=baseurl+"php/fetchepisode.php";var ajaxurl=baseurl+"php/getinf.php";var ajaxurlgetmovie=baseurl+"php/getMovie.php";var getEpisodeUrl=baseurl+"php/getseriesepisode.php";var getSeasonsUrl=baseurl+"php/getseasons.php";var type="film";var datapost="";var marktitle="";var ajaxurlgetmovieanime=baseurl+"php/gdrive/anime/getMovieAnime.php";var ajaxurlgetserianime=baseurl+"php/gdrive/anime/getSeriAnime.php";var cariurlanime=baseurl+"php/gdrive/anime/searchTitleAnime.php";var getEpisodeUrlAnime=baseurl+"php/gdrive/anime/getSeriesEpisodeAnime.php";var getSeasonsUrlAnime=baseurl+"php/gdrive/anime/getSeasonsAnime.php";var pilihurlanime=baseurl+"php/gdrive/anime/pilihmovieanime.php";var fetchmovieurlanime=baseurl+"php/gdrive/anime/fetchmovieanime.php";var saveseasonurlanime=baseurl+"php/gdrive/anime/saveseasonanime.php";var fetchepisodeurlanime=baseurl+"php/gdrive/anime/fetchepisodeanime.php";function alertSuccess(a){$.alert({icon:"fa fa-check",title:"Success",type:"green",content:a})}function alertFail(a){$.alert({icon:"fa fa-exclamation",title:"Fail",type:"red",content:a})}function changeType(a){$.confirm({title:"Confirm",icon:"fa fa-exclamation-triangle",type:"orange",content:"Ubah type menjadi seri? Pastikan title adalah seri!",buttons:{Ya:function(){$.post(baseurl+"php/changetype.php",{id:a}).done(function(c){console.log(c);var b=JSON.parse(c);if(b.code==1){$("#myModal").modal("hide");ajaxtable.fnDraw(false);alertSuccess(b.msg||"Success")}else{alertFail(b.msg||"error")}})},cancel:function(){}}})}function pilihmovie(d,a,b,c){$.confirm({content:function(){var e=this;return $.post(pilihurl,{id:d,inflixerid:a,title:b,poster:c,type:type}).done(function(g){console.log(g);var f=JSON.parse(g);e.close();if(f.code==1){$("#myModal").modal("hide");ajaxtable.fnDraw(false);alertSuccess(f.msg||"Success")}else{alertFail(f.msg||"error")}}).fail(function(){e.setContent("Something went wrong.")})}})}function fetchmovie(a){$.confirm({content:function(){var b=this;return $.post(fetchmovieurl,{id:a}).done(function(d){console.log(d);var c=JSON.parse(d);b.close();if(c.code==1){ajaxtable.fnDraw(false);alertSuccess(c.msg||"Success")}else{alertFail(c.msg||"error")}}).fail(function(){b.setContent("Something went wrong.")})}})}function fetchepisode(c,b,a){$.confirm({content:function(){var d=this;return $.post(fetchepisodeurl,{id:c,season:b,episode:a}).done(function(f){var e=JSON.parse(f);d.setContent(e.msg);d.close();if(e.code==1){d.setTitle("Success");alertSuccess(e.msg||"Success");getlistepisode(c)}else{alertFail(e.msg||"error")}}).fail(function(){d.setContent("Something went wrong.")})}})}function fetchstatus(b,a){$.confirm({content:function(){var c=this;return $.post(baseurl+"php/fetchstatus.php",{trx_id:a}).done(function(e){var d=JSON.parse(e);c.setContent(d.msg);c.close();if(d.code==1){c.setTitle("Success");alertSuccess(d.msg||"Success");getlistepisode(b)}else{alertFail(d.msg||"error");if(d.code==-10){getlistepisode(b)}}}).fail(function(){c.setContent("Something went wrong.")})}})}function fetchAllepisode(a){$.confirm({content:function(){var b=this;return $.ajax({url:fetchepisodeurl,method:"post",data:{id:a}}).done(function(d){console.log(d);var c=JSON.parse(d);b.setContent(c.msg);if(c.code==1){b.setTitle("Success");getlistepisode(a)}else{b.setTitle("Fail")}}).fail(function(){b.setContent("Something went wrong.")})}})}function submitlink(){$.confirm({content:function(){var a=this;return $.post(pilihurl,{crawlerid:$("#table-id").val(),linkinflixer:$("#link-inflixer").val(),type:type}).done(function(c){console.log(c);var b=JSON.parse(c);a.close();if(b.code==1){$("#myModal").modal("hide");ajaxtable.fnDraw(false);alertSuccess(b.msg||"Success")}else{alertFail(b.msg||"error")}}).fail(function(){a.setContent("Something went wrong.")})}})}function editSeason(d,b){var a=$("#btnSubmitSeason_"+d).val();if(a==0){$("#txtseason_"+d).prop("readonly",false).focus();$("#btnSubmitSeason_"+d).val(1);$("#btnSubmitSeason_"+d).html("Save")}else{if(a==1){var c=$("#txtseason_"+d).val();$.post(saveseasonurl,{id:d,numseason:c}).done(function(f){console.log(f);var e=JSON.parse(f);if(e.code==1){alertSuccess(e.msg||"Success");getlistepisode(b)}else{alertFail(e.msg||"error")}});$("#txtseason_"+d).prop("readonly",true);$("#btnSubmitSeason_"+d).val(0);$("#btnSubmitSeason_"+d).html("Edit")}}}function editConf(c){var a=$("#btnSubmitConf_"+c).val();if(a==0){$("#txtConf_"+c).prop("readonly",false).focus();$("#btnSubmitConf_"+c).val(1);$("#btnSubmitConf_"+c).html("Save")}else{if(a==1){var b=$("#txtConf_"+c).val();$.post(baseurl+"php/saveConf.php",{key:c,val:b}).done(function(e){console.log(e);var d=JSON.parse(e);if(d.code==1){alertSuccess(d.msg||"Success")}else{alertFail(d.msg||"error")}}).fail(function(d){alertFail("Request failed")});$("#txtConf_"+c).prop("readonly",true);$("#btnSubmitConf_"+c).val(0);$("#btnSubmitConf_"+c).html("Edit")}}}function detailMovie(a,e,d,h,f,g,b,i){$("#link").val("");$("#subtitle").val("");$("#video").html("");$("#judulfilm").html("");$("#Posterfilm").html("");$("#link-inflixer").val("");$("#season").html("");$("#episode").html("");$("#judulfilmbioskopkeren").html("");$("#list").html('<div class="text-center"><i class="fa fa-spinner fa-spin fa-4x"></i></div>');$("#table-id").val(a);$("#list-info").hide();marktitle=d;searchTitle(a,i,1);if(i=="seri"){getlistseason(a);getlistepisode(a)}var c="<a href='"+f+"'><b>"+e+"</b></a>";$("#judulfilmbioskopkeren").html(c);$("#judulfilm").html("<b>"+d+"</b>");$("#tahunFilm").html("<b>"+g+"</b>");$("#director").html("<b>"+b+"</b>");$("#Posterfilm").html("<img src='"+h+"'/>")}function searchTitle(c,a,b){$("#list").html('<div class="text-center"><i class="fa fa-spinner fa-spin fa-4x"></i></div>');$.post(cariurl,{id:c,type:a,page:b}).done(function(d){if(d.total!=null){$("#btn-prev").prop("disabled",false);$("#list-info").show();$("#btn-next").prop("disabled",false);if(b==1){$("#btn-prev").prop("disabled",true)}if(b==d.total_pages){$("#btn-next").prop("disabled",true)}$("#btn-next").attr("onclick","searchTitle("+c+",'"+a+"',"+(b+1)+")");$("#btn-prev").attr("onclick","searchTitle("+c+",'"+a+"',"+(b-1)+")");$("#list-info-total").html("Total:"+d.total+", page:"+d.page+" of "+d.total_pages);$("#list").html(d.data);$("#list").mark(marktitle)}else{$("#list").html("")}}).fail(function(){$("#list").html("Gagal melakukan pencarian")})}function confirmpilih(d,a,b,c){$.confirm({title:"Confirm",icon:"fa fa-exclamation-triangle",type:"orange",content:"Pastikan film sudah sesuai, lanjutkan fetch?",buttons:{Ya:function(){pilihmovie(d,a,b,c)},cancel:function(){}}})}function getlistseason(a){$.get(getSeasonsUrl,{id:a}).done(function(b){$("#season").html(b)}).fail(function(){$("#season").html("Gagal menampilkan list episode")})}function getlistepisode(a){$.get(getEpisodeUrl,{id:a}).done(function(b){$("#episode").html(b)}).fail(function(){$("#episode").html("Gagal melakukan pencarian")})}function detailMovieAnime(a,e,d,h,f,g,b,i){$("#link").val("");$("#subtitle").val("");$("#video").html("");$("#judulfilm").html("");$("#Posterfilm").html("");$("#link-inflixer").val("");$("#season").html("");$("#episode").html("");$("#judulfilmbioskopkeren").html("");$("#list").html('<div class="text-center"><i class="fa fa-spinner fa-spin fa-4x"></i></div>');$("#table-id").val(a);marktitle=d;searchTitleAnime(a,i,1);if(i=="seri"){getlistseasonanime(a);getlistepisodeanime(a)}var c="<a href='"+f+"'><b>"+e+"</b></a>";$("#judulfilmbioskopkeren").html(c);$("#judulfilm").html("<b>"+d+"</b>");$("#tahunFilm").html("<b>"+g+"</b>");$("#director").html("<b>"+b+"</b>");$("#Posterfilm").html("<img src='"+h+"' width='125px'/>")}function searchTitleAnime(c,a,b){$("#list").html('<div class="text-center"><i class="fa fa-spinner fa-spin fa-4x"></i></div>');$.post(cariurlanime,{id:c,type:a,page:b}).done(function(d){if(d.total!=null){$("#btn-prev").prop("disabled",false);$("#list-info").show();$("#btn-next").prop("disabled",false);if(b==1){$("#btn-prev").prop("disabled",true)}if(b==d.total_pages){$("#btn-next").prop("disabled",true)}$("#btn-next").attr("onclick","searchTitleAnime("+c+",'"+a+"',"+(b+1)+")");$("#btn-prev").attr("onclick","searchTitleAnime("+c+",'"+a+"',"+(b-1)+")");$("#list-info-total").html("Total:"+d.total+", page:"+d.page+" of "+d.total_pages);$("#list").html(d.data);$("#list").mark(marktitle)}else{$("#list").html("")}}).fail(function(){$("#list").html("Gagal melakukan pencarian")})}function getlistseasonanime(a){$.get(getSeasonsUrlAnime,{id:a}).done(function(b){$("#season").html(b)}).fail(function(){$("#season").html("Gagal menampilkan list episode")})}function getlistepisodeanime(a){$.get(getEpisodeUrlAnime,{id:a}).done(function(b){$("#episode").html(b)}).fail(function(){$("#episode").html("Gagal melakukan pencarian")})}function pilihmovieanime(d,a,b,c){$.confirm({content:function(){var e=this;return $.ajax({url:pilihurlanime,method:"post",data:{id:d,inflixerid:a,title:b,poster:c,type:type}}).done(function(g){console.log(g);var f=JSON.parse(g);e.setContent(f.msg);if(f.code==1){e.setTitle("Success")}else{e.setTitle("Fail")}}).fail(function(){e.setContent("Something went wrong.")})}})}function submitlinkanime(){$.post(pilihurlanime,{crawlerid:$("#table-id").val(),linkinflixer:$("#link-inflixer").val(),type:type}).done(function(b){console.log(b);var a=JSON.parse(b);if(a.code==1){$("#myModal").modal("hide");ajaxtable.fnDraw(false);alertSuccess(a.msg||"Success")}else{alertFail(a.msg||"error")}})}function fetchmovieanime(a){$.post(fetchmovieurlanime,{id:a}).done(function(c){console.log(c);var b=JSON.parse(c);if(b.code==1){ajaxtable.fnDraw(false);alertSuccess(b.msg||"Success")}else{alertFail(b.msg||"error")}})}function unlinkMovieAnime(b,a){$.post(baseurl+"php/gdrive/anime/unlink.php",{id:b,type:a}).done(function(d){console.log(d);var c=JSON.parse(d);if(c.code==1){ajaxtable.fnDraw(false);alertSuccess(c.msg||"Success")}else{alertFail(c.msg||"error")}})}function unlinkMovie(a){$.post(baseurl+"php/unlink.php",{id:a}).done(function(c){console.log(c);var b=JSON.parse(c);if(b.code==1){ajaxtable.fnDraw(false);alertSuccess(b.msg||"Success")}else{alertFail(b.msg||"error")}})}function editSeasonAnime(d,b){var a=$("#btnSubmitSeason").val();if(a==0){$("#txtseason_"+d).prop("readonly",false).focus();$("#btnSubmitSeason").val(1);$("#btnSubmitSeason").html("Save")}else{if(a==1){var c=$("#txtseason_"+d).val();$.post(saveseasonurlanime,{id:d,numseason:c}).done(function(f){console.log(f);var e=JSON.parse(f);if(e.code==1){alertSuccess(e.msg||"Success")}else{alertFail(e.msg||"error")}});$("#txtseason_"+d).prop("readonly",true);$("#btnSubmitSeason").val(0);$("#btnSubmitSeason").html("Edit")}}}function fetchepisodeanime(c,b,a){$.confirm({content:function(){var d=this;return $.post(fetchepisodeurlanime,{id:c,season:b,episode:a}).done(function(f){console.log(f);var e=JSON.parse(f);d.setContent(e.msg);if(e.code==1){d.setTitle("Success");getlistepisodeanime(c)}else{d.setTitle("Fail")}})}})}function fetchAllepisodeanime(a){$.confirm({content:function(){var b=this;return $.ajax({url:fetchepisodeurlanime,method:"post",data:{id:a}}).done(function(d){console.log(d);var c=JSON.parse(d);b.setContent(c.msg);if(c.code==1){b.setTitle("Success");getlistepisodeanime(a)}else{b.setTitle("Fail")}}).fail(function(){b.setContent("Something went wrong.")})}})}function detailWiki(a){$.post(baseurl+"php/asianwiki/getDetail.php",{id:a}).done(function(d){$("#wikiPlot").html(d.plot);$("#wikiNotes").html(d.notes);$("#wikiTitle").html(d.rawtitle);$("#wikiPoster").attr("src",d.poster);$("#wikiRating").html(d.rating);$("#wikiNumVotes").html("("+d.num_votes+"votes)");$("#wikiType").html(d.type);var c="";var b=d.profile;for(key in b){c+="<li> <b class='ucwords'>"+key.replace("_"," ")+":</b> "+b[key]+"</li>"}$("#wikiProfiles").html(c)}).fail(function(){$("#wikiPlot").html("")});getWikiCasts(a);getWikiEpisodes(a)}function getWikiCasts(a){$("#wikiCasts").html('<div class="text-center"><i class="fa fa-spinner fa-spin fa-4x"></i></div>');$.post(baseurl+"php/asianwiki/getCasts.php",{id:a}).done(function(b){$("#wikiCasts").html(b)}).fail(function(){$("#wikiCasts").html("Gagal menampilkan cast")})}function getWikiEpisodes(a){$("#wikiEpisodes").html('<div class="text-center"><i class="fa fa-spinner fa-spin fa-4x"></i></div>');$.post(baseurl+"php/asianwiki/getEpisodes.php",{id:a}).done(function(b){$("#wikiEpisodes").html(b)}).fail(function(){$("#wikiEpisodes").html("Gagal menampilkan Episode")})};